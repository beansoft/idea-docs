


<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Guidelines for Creating IntelliJ Platform SDK Code Samples / IntelliJ Platform SDK  DevGuide</title>
    <link rel="stylesheet" href="/idea-docs/app/app.css">
    <link rel="shortcut icon" href="/idea-docs/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="57x57" href="/idea-docs/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/idea-docs/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/idea-docs/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/idea-docs/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/idea-docs/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/idea-docs/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/idea-docs/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/idea-docs/apple-touch-icon-180x180.png">
    <link rel="mask-icon" href="/idea-docs/apple-mask-icon.svg" color="black">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-square70x70logo" content="/idea-docs/mstile-70x70.png">
    <meta name="msapplication-TileImage" content="/idea-docs/mstile-144x144.png">
    <meta name="msapplication-square150x150logo" content="/idea-docs/mstile-150x150.png">
    <meta name="msapplication-wide310x150logo" content="/idea-docs/mstile-310x150.png">
    <meta name="msapplication-square310x310logo" content="/idea-docs/mstile-310x310.png">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://beansoft.github.io/idea-docs//intro/sdk_code_guidelines.html" />
    <meta property="og:site_name" content="JetBrains IntelliJ Platform SDK" />
    <meta property="og:title" content="Guidelines for Creating IntelliJ Platform SDK Code Samples" />
    <meta property="og:description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta property="og:image" content="https://beansoft.github.io/idea-docs/jetbrains.png" />
    <meta property="article:modified_time" content="2019-05-11T20:37:03+08:00" />
    <!-- <meta property="article:section" content="" /> 
    <meta property="article:tag" content="" /> -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JBPlatform" />
    <meta name="twitter:title" content="Guidelines for Creating IntelliJ Platform SDK Code Samples" />
    <meta name="twitter:description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta name="twitter:image" content="https://beansoft.github.io/idea-docs/jetbrains.png" />
    <meta class="swiftype" name="product" data-type="string" content="/idea-docs/"></meta>
<link  rel="stylesheet" href="/idea-docs/app/styles.css"></head>
<body data-id="intro/sdk_code_guidelines">
<div class="wrapper">
    <section class="panel _nav">
        <header class="panel__header">
            <div class="container">
                <form class="search-box">
                    <label for="search-box__input" class="search-box__label">
                        <input type="text" class="search-box__input" id="search-box__input" placeholder="Search IntelliJ Platform SDK  DevGuide">
                    </label>
                    <div class="search-box__clear" title="Clear"></div>
                </form>
            </div>
        </header>
        <nav class="panel__content">
            <div class="container _nav">
                <menu class="nav-tree"></menu>
            </div>
            <div class="container _footer panel__footer">
                <p><a data-bypass="true" href="//youtrack.jetbrains.com/issues/IJSDK">Send feedback</a></p>
                <p>&copy; 2000&ndash;2022 <a href="//www.jetbrains.com">JetBrains</a> s.r.o.<br>
                    All rights reserved.</p>
            </div>
        </nav>
    </section>

    <main class="panel _main" role="main">
        <header class="panel__header">
            <div class="container">
                <h3>IntelliJ Platform SDK DevGuide</h3>
                
                <div class="panel-trigger"></div>
            </div>
        </header>
        <section class="panel__content">
            <div class="container">
                <article class="article" data-shortcut-switcher="false">
                    <div class="navigation-links _top" data-swiftype-index="false">
                        <a class="navigation-links__prev" href="/intro/sdk_style.html">Style Guide for SDK Documents</a>
                        
                    </div>
                    <a data-bypass="true" href="https://github.com/beansoft/idea-docs/edit/master/intro/sdk_code_guidelines.md" class="page-link-to-github" target="_blank" title="Edit this page on GitHub">
                        <i class="github-icon"></i>
                        <span class="text">Edit page</span>
                    </a>

                    <h1>Guidelines for Creating IntelliJ Platform SDK Code Samples</h1>
                    <p>本文档描述了用于编写开源IntelliJ Platform SDK代码示例的编码指南.</p>

<p>在开始之前,请仔细阅读本页以及<a href="/idea-docs/CODE_OF_CONDUCT.html"><span>行为准则</span></a>和<a href="https://github.com/JetBrains/intellij-sdk-docs/blob/master/LICENSE.txt" data-bypass="yes" target="_blank"><span>许可证</span></a>文件.</p>

<p>有关为IntelliJ平台本身做出贡献的信息,请访问<a href="/idea-docs/basics/platform_contributions.html"><span>贡献IntelliJ平台</span></a>.</p>

<a name="section" class="elem-anchor"></a>
<h2>目标<a href="#section" class="anchor-link"><span></span></a></h2>

<p>在编写SDK代码示例时,请记住以下注意事项:</p>

<ul>
  <li>
    <p>SDK示例的目的是演示在IntelliJ平台的子系统和组件之上构建的实现模式.</p>
  </li>
  <li>SDK代码示例是教学代码,旨在教授.
  </li>
  <li>教学代码在某些关键方面与生产代码不同:
    </li>
  <li>为了简单和简洁,牺牲一些稳健性.
      
使用错误检查有必要对实施陷阱提出一个观点.
    </li>
  <li>尽可能简化实现,但使用IntelliJ平台,Java语言和库的全部功能.
    </li>
  <li>为接口,类,字段,方法和扩展点使用有意义的名称.
    </li>
  <li>编写指导JavaDoc注释.
  </li>
  <li>
    <p>代码示例取代了大量文档.</p>
  </li>
  <li>针对两个级别的SDK示例:
  </li>
  <li>通过演示IntelliJ平台的有限区域,_basic_示例专注于特定主题.
    
它应该显示所有组件和架构,但最终会完成一些基本的东西.
    
例如,通过仅存储<code class="code highlight language-text">String</code>来演示持久性.
  </li>
  <li>_advanced_示例演示了IntelliJ平台的不同部分如何集成和协同工作.
    
例如,将检查或意图与非平凡的PsiTree操作相结合.
 </li>
</ul>

<p>最终,目标是为开发人员提供在基于IntelliJ平台的插件中实现功能的路线图.</p>

<p>每个路线图应包含:</p>

<ul>
  <li>
    <p>指向实现该功能所需的IntelliJ Platform API的SDK文档.</p>
  </li>
  <li>
    <p>指向相关的_basic_ SDK示例插件的指针.</p>
  </li>
  <li>
    <p>指向相关的_advanced_ SDK示例插件的指针.</p>
  </li>
</ul>

<a name="sdk" class="elem-anchor"></a>
<h2>SDK插件的命名约定<a href="#sdk" class="anchor-link"><span></span></a></h2>

<p>对于_basic_ samples,命名约定集中在正在演示的IntelliJ Platform API上.</p>

<p>例如,<code class="code highlight language-text">foo_basics</code>其中<code class="code highlight language-text">foo</code>对应于IntelliJ平台功能,框架或组件.</p>

<p>一些命名示例包括<code class="code highlight language-text">facet_basics</code>和<code class="code highlight language-text">editor_basics</code>.</p>

<p>每个IntelliJ Platform API区域只有一个_basic_示例.</p>

<p>对于_advanced_代码示例,名称应该反映插件而不是IntelliJ Platform API提供的复杂功能.</p>

<p>高级样本将与示例中演示的IntelliJ Platform API交叉引用.</p>

<p>无论基本版还是高级版,SDK插件名称在Gradle插件向导中也称为“工件ID”.</p>

<a name="plugin-copyright-statements" class="elem-anchor"></a>
<h2>Plugin Copyright Statements<a href="#plugin-copyright-statements" class="anchor-link"><span></span></a></h2>
<p>Use the standard intellij-community copyright notice in all sample plugins authored by JetBrains:</p>
<div class="code-block" data-lang="text"><code class="code-block__wrapper">Copyright 2000-$today.year JetBrains s.r.o. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file."  
</code></div>
<p>The copyright statement must appear in every source file with the <code class="code highlight language-text">$today.year</code> <a href="https://www.jetbrains.com/help/idea/copyright-profiles.html" data-bypass="yes" target="_blank"><span>Velocity</span></a> template resolved.</p>

<a name="id" class="elem-anchor"></a>
<h2>插件ID约定<a href="#id" class="anchor-link"><span></span></a></h2>

<p>插件ID(<code class="code highlight language-text">plugin.xml</code>中的<code class="code highlight language-text">&lt;id&gt;</code>)总是以<code class="code highlight language-text">org.intellij.sdk</code>开头.</p>

<p>插件ID在Gradle插件向导中称为“组ID”.</p>

<p>对于_basic_代码示例,不必在插件ID中包含“basic”.</p>

<p>像<code class="code highlight language-text">facet_basics</code>这样的插件有ID<code class="code highlight language-text">org.intellij.sdk.facet</code>.</p>

<a name="section-1" class="elem-anchor"></a>
<h2>插件包名称<a href="#section-1" class="anchor-link"><span></span></a></h2>

<p>插件中的包应以插件ID开头.</p>

<p>如果插件中只有一个包,则包名称与插件ID相同.</p>

<a name="plugin-directory-structure" class="elem-anchor"></a>
<h2>Plugin Directory Structure<a href="#plugin-directory-structure" class="anchor-link"><span></span></a></h2>
<p>SDK sample code should have a standard directory footprint.
Standardized structure not only makes the samples easier to navigate and understand, but it builds on the default Gradle plugin project structure.
The following is the directory structure for a <code class="code highlight language-text">foo_basics</code> plugin.</p>
<div class="code-block" data-lang="text"><code class="code-block__wrapper">code_samples/
  foo_basics/
    gradle/
    src/
      main/
        java/
          icons/
            FooBasicsIcons.java
        resources/
          icons/
            sdk.svg           # The standard SDK icon for menus, etc.
          META-INF/
            plugin.xml        # The plugin configuration file
            pluginIcon.svg    # The standard SDK plugin icon
      test/                   # Omit if there are no tests
        java/
        resources/
    build.gradle
    gradlew
    gradle.bat
    settings.gradle
</code></div>

<a name="buildgradle" class="elem-anchor"></a>
<h2>build.gradle约定<a href="#buildgradle" class="anchor-link"><span></span></a></h2>

<p>应该<a href="/idea-docs/tutorials/build_system.html"><span>使用Gradle</span></a>开发新的SDK代码示例.</p>

<p>在撰写本文时,在SDK代码示例中使用Gradle仍然在很大程度上依赖于<code class="code highlight language-text">plugin.xml</code>来指定插件配置.</p>

<p>在稍后的第二阶段,SDK代码示例将转换为更多地依赖Gradle配置.</p>

<p><code class="code highlight language-text">build.gradle</code>文件的默认内容由<a href="/idea-docs/tutorials/build_system/prerequisites.html#create-a-plugin-project-from-scratch"><span>Gradle项目向导</span></a>生成.</p>

<p>SDK代码示例的“build.gradle”文件的一致结构对于清晰度很重要,并且基于项目向导生成的默认值.</p>

<p>SDK代码示例<code class="code highlight language-text">build.gradle</code>文件中的注释应仅引起对Gradle配置中对插件唯一的部分的注意.</p>

<p>For SDK code samples a few alterations are needed to the default build.gradle file produced by the plugin wizard:</p>
<ul>
  <li>Add the following statements to the <a href="https://github.com/JetBrains/gradle-intellij-plugin/blob/master/README.md#setup-dsl" data-bypass="yes" target="_blank"><span>Setup DSL</span></a> (<code class="code highlight language-text">intellij{}</code>) section:
<div class="code-block" data-lang="groovy"><code class="code-block__wrapper"><span class="c1">// Prevents patching &lt;idea-version&gt; attributes in plugin.xml</span>
<span class="n">updateSinceUntilBuild</span> <span class="o">=</span> <span class="kc">false</span> 
<span class="c1">// Define a shared sandbox directory for running code sample plugins within an IDE.</span>
<span class="n">sandboxDirectory</span> <span class="o">=</span> <span class="n">file</span><span class="o">(</span><span class="s2">"${project.projectDir}/../_idea-sandbox"</span><span class="o">)</span>
</code></div>
  </li>
  <li>Remove the <a href="https://github.com/JetBrains/gradle-intellij-plugin/blob/master/README.md#patching-dsl" data-bypass="yes" target="_blank"><span>Patching DSL</span></a> (<code class="code highlight language-text">patchPluginXml{}</code>) section.
It is not needed in SDK samples.</li>
  <li>Add the <code class="code highlight language-text">javadoc</code> task to build documentation for the code sample:
<div class="code-block" data-lang="groovy"><code class="code-block__wrapper"><span class="c1">// Force javadoc rebuild before jar is built</span>
<span class="n">jar</span><span class="o">.</span><span class="na">dependsOn</span> <span class="n">javadoc</span>
</code></div>
  </li>
</ul>

<a name="pluginxml" class="elem-anchor"></a>
<h2>plugin.xml约定<a href="#pluginxml" class="anchor-link"><span></span></a></h2>

<p>SDK代码示例的<a href="/idea-docs/basics/plugin_structure/plugin_configuration_file.html"><span><code class="code highlight language-text">plugin.xml</code></span></a>配置文件的一致结构非常重要,因为我们希望引起对插件文件的独特部分的注意.</p>

<p>不一致的元素顺序在视觉上是嘈杂的.</p>

<p>大量关于独特元素和配置的评论,并谨慎地评论其余部分和配置.</p>

<p>SDK代码示例<code class="code highlight language-text">plugin.xml</code>文件中的元素序列是:</p>

<ul>
  <li>
    <p><code class="code highlight language-text">&lt;id&gt;</code>使用完全限定的<a href="#plugin-id-conventions"><span>插件ID</span></a>.</p>
  </li>
  <li>
    <p><code class="code highlight language-text">&lt;name&gt;</code>名称值不必与[插件名称]匹配(#naming-conventions-for-sdk-plugins).
  
它可能反映了插件的功能.
  
名称必须以“SDK:”开头.</p>
  </li>
  <li><code class="code highlight language-text">&lt;version&gt;</code>MAJOR.MINOR.FIX格式的代码示例版本.
  </li>
  <li>MAJOR对应于功能的重大升级.
  </li>
  <li>MINOR对应于次要重构和功能上的小改进.
  </li>
  <li>
    <p>FIX对应于在没有重大重构的情况下修复问题的更改.</p>
  </li>
  <li><code class="code highlight language-text">&lt;idea-version/&gt;</code>设置属性:
  </li>
  <li><code class="code highlight language-text">since-build</code>属性是IntelliJ平台最早的兼容版本号.
  </li>
  <li>
    <p><code class="code highlight language-text">until-build</code>属性为空字符串<code class="code highlight language-text">“”</code>.
    
每个主要版本都会审核SDK代码示例,以确保与最新的IntelliJ平台兼容.</p>
  </li>
  <li>
    <p><code class="code highlight language-text">&lt;description&gt;</code>是对所演示内容以及用户如何访问该功能的简洁说明.</p>
  </li>
  <li>
    <p><code class="code highlight language-text">&lt;change-notes&gt;</code>是按版本号排列的有序列表,其中简要描述了每个版本的更改.</p>
  </li>
  <li><code class="code highlight language-text">&lt;vendor&gt;</code>将值设置为<code class="code highlight language-text">IntelliJ Platform SDK</code>.
  
设置属性:
  </li>
  <li><code class="code highlight language-text">email</code>省略此属性.
  </li>
  <li>
    <p><code class="code highlight language-text">url</code>到JetBrains插件库`“https://plugins.jetbrains.com”</p>
  </li>
  <li>[插件配置元素]的其余部分(/basics/plugin_structure/plugin_configuration_file.md)只应在特定插件需要时才会出现.</li>
</ul>

<a name="section-2" class="elem-anchor"></a>
<h2>测试<a href="#section-2" class="anchor-link"><span></span></a></h2>

<p>IntelliJ Platform SDK代码示例应该根据<code class="code highlight language-text">since-build</code>版本构建和测试.</p>

<p>代码示例应该干净地构建,没有警告或错误,新的代码示例应该通过所有默认的IntelliJ IDEA代码检查.</p>

<p>Testers should complete the following checklist. 
Here the term “IDE” means the IntelliJ Platform-based IDE in which the plugin is designed to run:</p>
<ul>
  <li>The plugin should load in the IDE.</li>
  <li>The correct information about the plugin should display in the <strong>Preferences | Plugins</strong> panel.</li>
  <li>If applicable, the plugin UI such as tool windows, menu additions, etc. should display correctly.</li>
  <li>The functionality of the plugin should be tested with a sample file.</li>
  <li>If applicable, the plugin should pass unit tests.</li>
</ul>



                    <div class="navigation-links _bottom" data-swiftype-index="false">
                        <a class="navigation-links__prev" href="/intro/sdk_style.html">Style Guide for SDK Documents</a>
                        
                    </div>
                    <div class="last-modified">
                        Last modified: 11 May 2019
                    </div>
                </article>

                <section class="disqus">
                    <div id="disqus_thread"></div>
                </section>
            </div>
        </section>
    </main>
</div>

<script src="/idea-docs/app/app.js" data-baseurl="/idea-docs/"></script>

</body>
</html>

