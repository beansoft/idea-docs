


<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Kotlin for Plugin Developers / IntelliJ Platform SDK  DevGuide</title>
    <link rel="stylesheet" href="/app/app.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="mask-icon" href="/apple-mask-icon.svg" color="black">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-square70x70logo" content="/mstile-70x70.png">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="msapplication-square150x150logo" content="/mstile-150x150.png">
    <meta name="msapplication-wide310x150logo" content="/mstile-310x150.png">
    <meta name="msapplication-square310x310logo" content="/mstile-310x310.png">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://kana112233.github.io/intellij-sdk-docs-cn//tutorials/kotlin.html" />
    <meta property="og:site_name" content="JetBrains IntelliJ Platform SDK" />
    <meta property="og:title" content="Kotlin for Plugin Developers" />
    <meta property="og:description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta property="og:image" content="https://kana112233.github.io/intellij-sdk-docs-cn/jetbrains.png" />
    <meta property="article:modified_time" content="2019-04-15T15:13:16+08:00" />
    <!-- <meta property="article:section" content="" /> 
    <meta property="article:tag" content="" /> -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JBPlatform" />
    <meta name="twitter:title" content="Kotlin for Plugin Developers" />
    <meta name="twitter:description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta name="twitter:image" content="https://kana112233.github.io/intellij-sdk-docs-cn/jetbrains.png" />
    <meta class="swiftype" name="product" data-type="string" content="/"></meta>
<link  rel="stylesheet" href="/app/styles.css"></head>
<body data-id="tutorials/kotlin">
<div class="wrapper">
    <section class="panel _nav">
        <header class="panel__header">
            <div class="container">
                <form class="search-box">
                    <label for="search-box__input" class="search-box__label">
                        <input type="text" class="search-box__input" id="search-box__input" placeholder="Search IntelliJ Platform SDK  DevGuide">
                    </label>
                    <div class="search-box__clear" title="Clear"></div>
                </form>
            </div>
        </header>
        <nav class="panel__content">
            <div class="container _nav">
                <menu class="nav-tree"></menu>
            </div>
            <div class="container _footer panel__footer">
                <p><a data-bypass="true" href="//youtrack.jetbrains.com/issues/IJSDK">Send feedback</a></p>
                <p>&copy; 2000&ndash;2019 <a href="//www.jetbrains.com">JetBrains</a> s.r.o.<br>
                    All rights reserved.</p>
            </div>
        </nav>
    </section>

    <main class="panel _main" role="main">
        <header class="panel__header">
            <div class="container">
                <h3>IntelliJ Platform SDK DevGuide</h3>
                
                <div class="panel-trigger"></div>
            </div>
        </header>
        <section class="panel__content">
            <div class="container">
                <article class="article" data-shortcut-switcher="false">
                    <div class="navigation-links _top" data-swiftype-index="false">
                        <a class="navigation-links__prev" href="/reference_guide/intellij_artifacts.html">IntelliJ Platform Artifacts Repositories</a>
                        <a class="navigation-links__next" href="/reference_guide/internal_actions/internal_actions_intro.html">Internal Actions Menu</a>
                    </div>
                    <a data-bypass="true" href="https://github.com/kana112233/kana112233.github.io/edit/master/tutorials/kotlin.md" class="page-link-to-github" target="_blank" title="Edit this page on GitHub">
                        <i class="github-icon"></i>
                        <span class="text">Edit page</span>
                    </a>

                    <h1>Kotlin for Plugin Developers</h1>
                    <a name="why-kotlin" class="elem-anchor"></a>
<h2>1. Why Kotlin?<a href="#why-kotlin" class="anchor-link"><span></span></a></h2>

<p>Using Kotlin to write plugins for the IntelliJ Platform is very similar to writing plugins in Java. Existing plugin developers can get started by converting boilerplate Java classes to their Kotlin equivalents by using the <a href="https://kotlinlang.org/docs/tutorials/mixing-java-kotlin-intellij.html#converting-an-existing-java-file-to-kotlin-with-j2k" data-bypass="yes" target="_blank"><span>J2K compiler</span></a> bundled with the IntelliJ Platform (versions  143.+), and developers can easily mix and match Kotlin classes with their existing Java code.</p>

<p>In addition to <a href="https://kotlinlang.org/docs/reference/null-safety.html" data-bypass="yes" target="_blank"><span>null safety</span></a> and <a href="https://kotlinlang.org/docs/reference/type-safe-builders.html" data-bypass="yes" target="_blank"><span>type-safe builders</span></a>, the Kotlin language offers a number of convenient features for plugin development, which make plugins easier to read and simpler to maintain. Much like <a href="https://kotlinlang.org/docs/tutorials/kotlin-android.html" data-bypass="yes" target="_blank"><span>Kotlin for Android</span></a>, the IntelliJ Platform makes extensive use of callbacks, which are easy to express as <a href="https://kotlinlang.org/docs/reference/lambdas.html" data-bypass="yes" target="_blank"><span>lambdas</span></a> in Kotlin.</p>

<p>Likewise, it is easy to customize the behavior of internal classes in IntelliJ IDEA, with <a href="https://kotlinlang.org/docs/reference/extensions.html" data-bypass="yes" target="_blank"><span>extensions</span></a>. For example, it is common practice to <a href="https://www.slf4j.org/faq.html#logging_performance" data-bypass="yes" target="_blank"><span>guard logging statements</span></a> to avoid the cost of parameter construction, leading to the following ceremony when using the log:</p>

<div class="code-block" data-lang="java"><code class="code-block__wrapper"><span class="k">if</span><span class="o">(</span><span class="n">logger</span><span class="o">.</span><span class="na">isDebugEnabled</span><span class="o">())</span> <span class="o">{</span>
  <span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"..."</span><span class="o">);</span>
<span class="o">}</span>
</code></div>

<p>We can achieve the same result more succinctly in Kotlin, by declaring the following extension method:</p>

<div class="code-block" data-lang="kotlin"><code class="code-block__wrapper"><span class="k">inline</span> <span class="k">fun</span> <span class="nc">Logger</span><span class="p">.</span><span class="nf">debug</span><span class="p">(</span><span class="n">lazyMessage</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">isDebugEnabled</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">debug</span><span class="p">(</span><span class="n">lazyMessage</span><span class="p">())</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></div>

<p>Now we can directly write <code class="code highlight language-text">logger.debug { "..." }</code> to receive all the benefits of lightweight logging, with none of the verbosity. With practice, you will be able to recognize many idioms in the IntelliJ Platform that can be simplified with Kotlin. To learn more about building IntelliJ Platform plugins with Kotlin, this tutorial will help you get started.</p>

<a name="adding-kotlin-support" class="elem-anchor"></a>
<h2>2. Adding Kotlin Support<a href="#adding-kotlin-support" class="anchor-link"><span></span></a></h2>

<p>Plugins targeting the IntelliJ Platform versions 143 and above are easy to migrate: just start writing Kotlin. The necessary Kotlin plugins and libraries are already bundled with the IDE, requiring no further configuration. For version 142 or below, you will need to install and configure dependencies to the Kotlin runtime (in addition to installing the Kotlin plugin itself, for code assistance and tooling support). For detailed instructions, please refer to the <a href="https://kotlinlang.org/docs/tutorials/getting-started.html" data-bypass="yes" target="_blank"><span>Kotlin documentation</span></a>.</p>

<a name="kotlin-gradle-plugin" class="elem-anchor"></a>
<h2>3. Kotlin Gradle Plugin<a href="#kotlin-gradle-plugin" class="anchor-link"><span></span></a></h2>

<p>For plugins already using the <a href="build_system.html"><span>Gradle Build System</span></a>, or those that require precise control over the Kotlin build process, we recommend using the <a href="https://kotlinlang.org/docs/reference/using-gradle.html#configuring-dependencies" data-bypass="yes" target="_blank"><span>kotlin-gradle-plugin</span></a>. This <a href="https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-gradle-plugin-core" data-bypass="yes" target="_blank"><span>Gradle plugin</span></a> greatly simplifies building Kotlin projects in a controlled and reproducible manner.</p>

<p>Your <code class="code highlight language-text">build.gradle</code> file may look like so:</p>

<div class="code-block" data-lang="groovy"><code class="code-block__wrapper"><span class="n">buildscript</span> <span class="o">{</span>
    <span class="n">repositories</span> <span class="o">{</span>
        <span class="n">mavenCentral</span><span class="o">()</span>
    <span class="o">}</span>
    <span class="n">dependencies</span> <span class="o">{</span>
        <span class="n">classpath</span> <span class="s2">"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'org.jetbrains.intellij'</span>
<span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'kotlin'</span>

<span class="n">intellij</span> <span class="o">{</span>
    <span class="n">version</span> <span class="s1">'LATEST-TRUNK-SNAPSHOT'</span>
    <span class="n">pluginName</span> <span class="s1">'Example'</span>
<span class="o">}</span>

<span class="n">group</span> <span class="s1">'com.example'</span>
<span class="n">version</span> <span class="s1">'0.0.1'</span>

<span class="n">repositories</span> <span class="o">{</span>
    <span class="n">mavenCentral</span><span class="o">()</span>
<span class="o">}</span>
</code></div>

<p>Please note that you should <strong>not</strong> include <code class="code highlight language-text">kotlin-runtime</code> and <code class="code highlight language-text">kotlin-stdlib</code> jars with your plugin because Kotlin guarantees backward- and forward- binary compatibility.</p>

<a name="use-kotlin-to-write-gradle-script" class="elem-anchor"></a>
<h3>3.1. Use Kotlin to write Gradle script<a href="#use-kotlin-to-write-gradle-script" class="anchor-link"><span></span></a></h3>

<p>Starting with 4.4, Gradle supports <code class="code highlight language-text">build.gradle.kts</code>, an alternative to <code class="code highlight language-text">build.gradle</code> written in Kotlin.</p>

<p>There’re many good resources for learning how to write build scripts for an IntelliJ plugin with Kotlin script, like <a href="https://github.com/intellij-rust/intellij-rust/blob/master/build.gradle.kts" data-bypass="yes" target="_blank"><span>intellij-rust</span></a>, <a href="https://github.com/ice1000/julia-intellij/blob/master/build.gradle.kts" data-bypass="yes" target="_blank"><span>julia-intellij</span></a>, <a href="https://github.com/covscript/covscript-intellij/blob/master/build.gradle.kts" data-bypass="yes" target="_blank"><span>covscript-intellij</span></a> or <a href="https://github.com/ice1000/zig-intellij/blob/master/build.gradle.kts" data-bypass="yes" target="_blank"><span>zig-intellij</span></a>.</p>

<p><code class="code highlight language-text">build.gradle.kts</code> basically looks like:</p>

<div class="code-block" data-lang="kotlin"><code class="code-block__wrapper"><span class="n">group</span> <span class="p">=</span> <span class="s">"com.your.company.name"</span>
<span class="n">version</span> <span class="p">=</span> <span class="s">"0.1-SNAPSHOT"</span>

<span class="n">buildscript</span> <span class="p">{</span>
    <span class="n">repositories</span> <span class="p">{</span> <span class="n">mavenCentral</span><span class="p">()</span> <span class="p">}</span>
    <span class="n">dependencies</span> <span class="p">{</span> <span class="n">classpath</span><span class="p">(</span><span class="n">kotlin</span><span class="p">(</span><span class="s">"gradle-plugin"</span><span class="p">,</span> <span class="s">"1.2.30"</span><span class="p">))</span> <span class="p">}</span>
<span class="p">}</span>

<span class="n">plugins</span> <span class="p">{</span>
	<span class="n">id</span><span class="p">(</span><span class="s">"org.jetbrains.intellij"</span><span class="p">)</span> <span class="n">version</span> <span class="s">"0.4.5"</span>
	<span class="n">kotlin</span><span class="p">(</span><span class="s">"jvm"</span><span class="p">)</span> <span class="n">version</span> <span class="s">"1.2.30"</span>
<span class="p">}</span>

<span class="n">intellij</span> <span class="p">{</span>
    <span class="n">updateSinceUntilBuild</span> <span class="p">=</span> <span class="k">false</span>
    <span class="n">instrumentCode</span> <span class="p">=</span> <span class="k">true</span>
    <span class="n">version</span> <span class="p">=</span> <span class="s">"2017.3"</span>
<span class="p">}</span>
</code></div>

<a name="ui-in-kotlin" class="elem-anchor"></a>
<h2>4. UI in Kotlin<a href="#ui-in-kotlin" class="anchor-link"><span></span></a></h2>

<p>The best way to create user interfaces with Kotlin is to use a type safe DSL for building forms instead of GUI designer. The DSL used in the IntelliJ platform is inside <code class="code highlight language-text">com.intellij.ui.layout</code> package. <a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-4f9b5f89b2a19ce700b1373a465c16b28ed8ad52/platform/platform-impl/src/com/intellij/ui/layout/readme.md" data-bypass="yes" target="_blank"><span>Documentation</span></a>.</p>

<a name="handling-kotlin-code" class="elem-anchor"></a>
<h2>5. Handling Kotlin code<a href="#handling-kotlin-code" class="anchor-link"><span></span></a></h2>

<p>If you need to write a plugin that processes Kotlin code, you need to add a dependency on the Kotlin plugin. Please refer
to <a href="/basics/plugin_structure/plugin_dependencies.html"><span>Plugin Dependencies</span></a> for information on how to do that.</p>

<a name="examples" class="elem-anchor"></a>
<h2>6. Examples<a href="#examples" class="anchor-link"><span></span></a></h2>

<p>There are a number of <a href="https://github.com/search?l=Kotlin&amp;q=+intellij&amp;ref=searchresults&amp;type=Repositories" data-bypass="yes" target="_blank"><span>open source Kotlin projects</span></a> built on the IntelliJ Platform. For a readily available source of up to date examples and applications of the Kotlin language for building developer tools with the IntelliJ Platform, developers may look to these projects for inspiration:</p>

<ul>
  <li><a href="https://github.com/intellij-rust/intellij-rust" data-bypass="yes" target="_blank"><span>intellij-rust</span></a></li>
  <li><a href="https://github.com/atsky/haskell-idea-plugin" data-bypass="yes" target="_blank"><span>haskell-idea-plugin</span></a></li>
  <li><a href="https://github.com/valich/intellij-markdown" data-bypass="yes" target="_blank"><span>intellij-markdown</span></a></li>
  <li><a href="https://github.com/chashnikov/IntelliJ-presentation-assistant" data-bypass="yes" target="_blank"><span>IntelliJ-presentation-assistant</span></a></li>
  <li><a href="https://github.com/hhariri/leanpub-plugin" data-bypass="yes" target="_blank"><span>leanpub-plugin</span></a></li>
</ul>


                    <div class="navigation-links _bottom" data-swiftype-index="false">
                        <a class="navigation-links__prev" href="/reference_guide/intellij_artifacts.html">IntelliJ Platform Artifacts Repositories</a>
                        <a class="navigation-links__next" href="/reference_guide/internal_actions/internal_actions_intro.html">Internal Actions Menu</a>
                    </div>
                    <div class="last-modified">
                        Last modified: 15 April 2019
                    </div>
                </article>

                <section class="disqus">
                    <div id="disqus_thread"></div>
                </section>
            </div>
        </section>
    </main>
</div>

<script src="/app/app.js" data-baseurl="/"></script>

</body>
</html>

